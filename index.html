<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Greater Louisville Project" />

<meta name="date" content="2021-01-01" />

<title>Early Childhood</title>

<script src="index_files/header-attrs-2.6/header-attrs.js"></script>
<script src="index_files/jquery-3.5.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>
<script src="index_files/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="index_files/plotly-binding-4.9.3/plotly.js"></script>
<script src="index_files/typedarray-0.1/typedarray.min.js"></script>
<link href="index_files/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="index_files/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="index_files/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="index_files/plotly-main-1.57.1/plotly-latest.min.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Early Childhood</h1>
<h4 class="author">Greater Louisville Project</h4>
<h4 class="date">2021</h4>

</div>


<div id="kindergarten-readiness" class="section level1">
<h1>Kindergarten Readiness</h1>
<p>Kindergarten readiness is an important indicator of whether children will succeed in the classroom. While the measure has limitations, it is a strong indicator of future student performance.</p>
<p>Based on data from KySTATS, JCPS students who entered school ready for kindergarten in 2016 were over three times as likely to achieve test results at or above their grade level on their standardized K-PREP math and reading tests in the 3rd grade. This is true for both JCPS students as a whole as well as Black JCPS students in particular.</p>
<div id="by-student-zip-code" class="section level2">
<h2>by Student Zip Code</h2>
<p>This data was aquired through a data request to JCPS. Note that this data only includes parents who send their children to JCPS, so it’s not a reflection of all children in a zip code.</p>
<p>The data shows wide disparities in the kindergarten readiness results</p>
<pre class="r"><code># Kready math

# ready w/ enrichments * (% distinguished + % proficient)
ready_prof_dist_math = (643 * (.317 + .353) + 2956 * (.122 + .355)) / 
                    (643 * (1 - .143) + 2956 * (1 - .111)) * 100
not_ready_prof_dist_math = 3886 * (.034 + .160) / 3886 * (1 - .111) * 100

mult_math = ready_prof_dist_math / not_ready_prof_dist_math

# Kready reading
ready_prof_dist_reading = (643 * (.463 + .235) + 2956 * (.219 + .309)) / 
                    (643 * (1 - .143) + 2956 * (1 - .111)) * 100
not_ready_prof_dist_reading = 3886 * (.057 + .165) / 3886 * (1 - .111) * 100

mult_reading = ready_prof_dist_reading / not_ready_prof_dist_reading

# black children
# ready w/ enrichments * (% distinguished + % proficient)
ready_prof_dist_math = (149 * (.148 + .376) + 940 * (.044 + .234)) / 
                    (149 * (1 - .067) + 940 * (1 - .089)) * 100
not_ready_prof_dist_math = 1443 * (.013 + .089) / 1443 * (1 - .090) * 100

mult_math_black = ready_prof_dist_math / not_ready_prof_dist_math

# Kready reading
ready_prof_dist_reading = (149 * (.275 + .248) + 940 * (.091 + .240)) / 
                    (149 * (1 - .067) + 940 * (1 - .089)) * 100
not_ready_prof_dist_reading = 1443 * (.019 + .106) / 1443 * (1 - .090) * 100

mult_reading_black = ready_prof_dist_reading / not_ready_prof_dist_reading

race_math = mult_math_black / mult_math
race_reading = mult_reading_black / mult_reading


# Ready in kready data
kready_zip &lt;- readxl::read_excel(&quot;raw_data/Copy of 1920_Brigance Zip Code_Prior Settings TablesForORR.xlsx&quot;,
                                 sheet = &quot;ZipCode3Years&quot;, 
                                 range =&quot;B4:K38&quot;,
                                 col_names = c(&quot;zip&quot;, paste0(c(&quot;num_&quot;, &quot;ready_&quot;, &quot;notready_&quot;),
                                                             rep(2018:2020, each = 3))),
                                 col_types = c(&quot;text&quot;, rep(&quot;numeric&quot;, 9)),
                                 na = &quot;*&quot;)

# Clean and organize data frame
kready_zip %&lt;&gt;% 
  pivot_longer(num_2018:notready_2020, names_to = c(&quot;var_type&quot;, &quot;year&quot;), names_sep = &quot;_&quot;) %&gt;%
  filter(var_type != &quot;notready&quot;) %&gt;%
  mutate(
    var_type = case_when(var_type == &quot;num&quot; ~ &quot;population&quot;,
                         var_type == &quot;ready&quot; ~ &quot;percent&quot;)) %&gt;%
  transmute(
    zip, year, var_type, 
    kready = if_else(var_type == &quot;percent&quot;, value * 100, value))

# Summarize data frame over three years due to unstable data
kready_zip_sum &lt;- kready_zip %&gt;%
  pivot_wider(names_from = var_type, values_from = kready) %&gt;%
  group_by(zip) %&gt;%
  filter(all(!is.na(percent))) %&gt;%
  summarise(
    percent = weighted.mean(percent, population),
    population = sum(population),
    .groups = &quot;drop&quot;) %&gt;%
  rename(kready = percent)

# Join data to map
map_zip %&lt;&gt;% left_join(kready_zip_sum, by = &quot;zip&quot;)
  
ggplot(map_zip) + 
  geom_sf(aes(fill = kready)) +
  #scale_fill_manual(values = viridis::viridis(6, direction = -1), na.value = &quot;grey&quot;) +
  viridis::scale_fill_viridis(na.value = &quot;grey&quot;, 
                            name = &quot;Percent Ready&quot;) +
  theme_bw(base_size = 22, base_family = &quot;Montserrat&quot;) +
  theme(panel.grid = element_blank(),
        axis.text = element_blank(),
        axis.ticks = element_blank(),
        axis.title = element_blank(),
        panel.border = element_blank()) +
  labs(title = &quot;JCPS Kindergarden Readiness by Student&#39;s Home Zip Code&quot;,
       subtitle = &quot;Average for the school years 2017-2018, 2018-2019, and 2019-2020&quot;) +
  theme(
    panel.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the panel
    plot.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the plot
    legend.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend bg
    legend.box.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend panel bg
    legend.key = element_rect(fill = &quot;transparent&quot;,colour = NA))</code></pre>
<p><img src="index_files/figure-html/kindergarten_readiness_data-1.png" width="672" /></p>
</div>
<div id="by-school-location" class="section level2">
<h2>by School Location</h2>
<p>This map shows kindergarten readiness results by school. Schools are shown by their student assignment area.</p>
<pre class="r"><code>load(&quot;raw_data/kready_jc.RData&quot;)
load(&quot;raw_data/map_elementary.RData&quot;)

# Filter out 
kready_jc_subset &lt;- kready_jc %&gt;%
  filter(code != &quot;275&quot;, 
         year == 2020, 
         demographic == &quot;All Students&quot;,
         prior_setting == &quot;All Students&quot;) %&gt;%
  mutate(code = str_sub(code, 4, 6) %&gt;%
                as.numeric)

map_elementary %&lt;&gt;%
  rename(
    SCHOOL_NAME = SCHOOL_NAM,
    LOCATION = LocNumber,
    CLUSTER = ClusterNum)

map_elementary %&lt;&gt;%
  left_join(kready_jc_subset, by = c(&quot;LOCATION&quot; = &quot;code&quot;))

ggplot(map_elementary) + 
  geom_sf(aes(fill = kready)) +
  #scale_fill_manual(values = viridis::viridis(6, direction = -1), na.value = &quot;grey&quot;) +
  viridis::scale_fill_viridis(na.value = &quot;grey&quot;, 
                            name = &quot;Percent Ready&quot;) +
  theme_bw(base_size = 22, base_family = &quot;Montserrat&quot;) +
  theme(panel.grid = element_blank(),
        axis.text = element_blank(),
        axis.ticks = element_blank(),
        axis.title = element_blank(),
        panel.border = element_blank()) +
  labs(title = &quot;JCPS Kindergarden Readiness by School Location&quot;, 2020) +
  theme(
    panel.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the panel
    plot.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the plot
    legend.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend bg
    legend.box.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend panel bg
    legend.key = element_rect(fill = &quot;transparent&quot;,colour = NA))</code></pre>
<p><img src="index_files/figure-html/clean_data-1.png" width="672" /></p>
</div>
<div id="by-prior-setting" class="section level2">
<h2>by Prior Setting</h2>
<p>The largest differences in kindergarten readiness are seen based on prior setting.</p>
<p>Children who were in licensed childcare providers prior to entering school are most likely to be kindergarten ready, while children who stayed at home with a parent or guardian are least likely to be kindergarten ready.</p>
<p>Children who were previously enrolled in Head Start, a State-funded preschool program, or were in another home setting, such as a private sitter or other family member, fall in the middle.</p>
<pre class="r"><code>load(&quot;raw_data/kready_ky.RData&quot;)

kready_louisville &lt;- kready_ky %&gt;%
  filter(variable == &quot;lou&quot;,
         sex == &quot;total&quot;,
         race == &quot;total&quot;,
         frl_status == &quot;total&quot;,
         prior_setting %in% c(&quot;State-Funded&quot;, &quot;Head Start&quot;, &quot;Child Care&quot;, &quot;Home&quot;, &quot;Other&quot;))

plt_by(kready_louisville,
       prior_setting,
       kready,
       title_text = &quot;Kindergarten Readiness by Prior Setting&quot;,
       remove_legend_title = T)</code></pre>
<p><img src="index_files/figure-html/kreaady_prior_setting-1.png" width="672" /></p>
</div>
<div id="by-race" class="section level2">
<h2>by Race</h2>
<pre class="r"><code>kready_race &lt;- kready_ky %&gt;%
  filter(variable == &quot;lou&quot;,
         sex == &quot;total&quot;,
         race %in% c(&quot;black&quot;, &quot;white&quot;),
         frl_status == &quot;total&quot;,
         prior_setting == &quot;All Students&quot;) %&gt;%
  mutate(race = str_to_title(race))

plt_by(kready_race,
       race,
       kready,
       title_text = &quot;Kindergarten Readiness by Race&quot;)</code></pre>
<p><img src="index_files/figure-html/kready_race-1.png" width="672" /></p>
</div>
<div id="by-race-and-prior-setting" class="section level2">
<h2>By Race and Prior setting</h2>
<pre class="r"><code>kready_race_plotly &lt;- kready_ky %&gt;%
  filter(variable == &quot;lou&quot;,
         sex == &quot;total&quot;,
         race %in% c(&quot;black&quot;, &quot;white&quot;, &quot;hispanic&quot;, &quot;asian&quot;),
         frl_status == &quot;total&quot;,
         prior_setting %in% c(&quot;All Students&quot;, &quot;State Funded&quot;, &quot;Head Start&quot;, &quot;Child Care&quot;, &quot;Home&quot;, &quot;Other&quot;)) %&gt;%
  mutate(race = str_to_title(race)) %&gt;%
  pivot_wider(names_from = race, values_from = kready)

trnfm_list &lt;- 
  list(
      list(
        type = &#39;filter&#39;,
        target = ~prior_setting,
        operation = &#39;in&#39;,
        value = unique(kready_race_plotly$prior_setting)[1]
      ))

plot_ly(kready_race_plotly) %&gt;%
  # add_trace(x = ~year, y = ~Black_ChildCare, name = &quot;Black&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;,
  #           line = list(color = &#39;#d63631&#39;, width = 4), visible=&quot;legendonly&quot;) %&gt;%
  # add_trace(x = ~year, y = ~White_ChildCare, name = &quot;White&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;,
  #           line = list(color = &#39;#323844&#39;, width = 4), visible=&quot;legendonly&quot;) %&gt;%
  add_trace(x = ~year, y = ~Black, name = &quot;Black&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
            line = list(color = &#39;#d63631&#39;, width = 4), transforms = trnfm_list) %&gt;%
  add_trace(x = ~year, y = ~White, name = &quot;White&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
            line = list(color = &#39;#323844&#39;, width = 4), transforms = trnfm_list) %&gt;%
  add_trace(x = ~year, y = ~Hispanic, name = &quot;Hispanic&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
            line = list(color = &#39;#eaab21&#39;, width = 4), transforms = trnfm_list) %&gt;%
  add_trace(x = ~year, y = ~Asian, name = &quot;Asian&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
            line = list(color = &#39;#a7bfd7&#39;, width = 4), transforms = trnfm_list) %&gt;%
  # add_trace(x = ~year, y = ~Black_Home, name = &quot;Black_Home&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
  #           line = list(color = &#39;#d63631&#39;, width = 4), showlegend=FALSE) %&gt;%
  # add_trace(x = ~year, y = ~White_Home, name = &quot;White_Home&quot;, type = &quot;scatter&quot;, mode = &quot;lines&quot;, 
  #           line = list(color = &#39;#323844&#39;, width = 4), showlegend=FALSE) %&gt;%
  layout(title = &quot;Kindergerten Readiness by Race&quot;,
         xaxis = list(title = &quot;Year&quot;),
         yaxis = list(title = &quot;Percent Ready&quot;, range = c(0, 100)),
         updatemenus = list(
          list(
            x = 1.25,
            y = 0.75,
            buttons = list(
              list(method = &quot;restyle&quot;,
                   args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[1]),
                   label = unique(kready_race_plotly$prior_setting)[1]),
              list(method = &quot;restyle&quot;,
                  args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[2]),
                  label = unique(kready_race_plotly$prior_setting)[2]),
              list(method = &quot;restyle&quot;,
                  args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[3]),
                  label = unique(kready_race_plotly$prior_setting)[3]),
              list(method = &quot;restyle&quot;,
                  args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[4]),
                  label = unique(kready_race_plotly$prior_setting)[4]),
              list(method = &quot;restyle&quot;,
                  args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[5]),
                  label = unique(kready_race_plotly$prior_setting)[5]),
                            list(method = &quot;restyle&quot;,
                   args = list(&quot;transforms[0].value&quot;, unique(kready_race_plotly$prior_setting)[6]),
                   label = unique(kready_race_plotly$prior_setting)[6])))))</code></pre>
<div id="htmlwidget-5d44130ae3c23d0a4a0d" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5d44130ae3c23d0a4a0d">{"x":{"visdat":{"498c39e530eb":["function () ","plotlyVisDat"]},"cur_data":"498c39e530eb","attrs":{"498c39e530eb":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"name":"Black","type":"scatter","mode":"lines","line":{"color":"#d63631","width":4},"transforms":[{"type":"filter","target":{},"operation":"in","value":"All Students"}],"inherit":true},"498c39e530eb.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"name":"White","type":"scatter","mode":"lines","line":{"color":"#323844","width":4},"transforms":[{"type":"filter","target":{},"operation":"in","value":"All Students"}],"inherit":true},"498c39e530eb.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"name":"Hispanic","type":"scatter","mode":"lines","line":{"color":"#eaab21","width":4},"transforms":[{"type":"filter","target":{},"operation":"in","value":"All Students"}],"inherit":true},"498c39e530eb.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"name":"Asian","type":"scatter","mode":"lines","line":{"color":"#a7bfd7","width":4},"transforms":[{"type":"filter","target":{},"operation":"in","value":"All Students"}],"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Kindergerten Readiness by Race","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Percent Ready","range":[0,100]},"updatemenus":[{"x":1.25,"y":0.75,"buttons":[{"method":"restyle","args":["transforms[0].value","All Students"],"label":"All Students"},{"method":"restyle","args":["transforms[0].value","State Funded"],"label":"State Funded"},{"method":"restyle","args":["transforms[0].value","Head Start"],"label":"Head Start"},{"method":"restyle","args":["transforms[0].value","Child Care"],"label":"Child Care"},{"method":"restyle","args":["transforms[0].value","Home"],"label":"Home"},{"method":"restyle","args":["transforms[0].value","Other"],"label":"Other"}]}],"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[2014,2014,2014,2014,2014,2014,2015,2015,2015,2015,2015,2015,2016,2016,2016,2016,2016,2016,2017,2017,2017,2017,2017,2017,2018,2018,2018,2018,2018,2018,2019,2019,2019,2019,2019,2019,2020,2020,2020,2020,2020,2020],"y":[46.9,50.2,52.7,58.3,28.1,49.2,48.8,53.2,56.9,55.8,26.8,52.8,42.6,48.6,56.4,48.1,24.6,45,50.5,59.8,61.4,55.5,28.8,51.2,53.8,65.5,63.4,58.5,27.6,64.1,51.2,63.1,63.6,58.1,30.2,55.3,49.5,62.2,61,58.3,28.5,47.6],"name":"Black","type":"scatter","mode":"lines","line":{"color":"#d63631","width":4},"transforms":[{"type":"filter","target":["All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other"],"operation":"in","value":"All Students"}],"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2014,2014,2014,2014,2014,2014,2015,2015,2015,2015,2015,2015,2016,2016,2016,2016,2016,2016,2017,2017,2017,2017,2017,2017,2018,2018,2018,2018,2018,2018,2019,2019,2019,2019,2019,2019,2020,2020,2020,2020,2020,2020],"y":[60.3,53,42.2,80.2,42.1,70.6,58.5,47.3,50,76.3,39.2,65,54.9,49.3,41.4,73.7,32.1,61.3,56.1,50.2,61.8,75,29.8,65.9,58.8,52.9,51.1,77.9,35.2,63.7,58.1,59.6,50.7,75.2,33.4,62.5,57.3,55.3,53.3,74.2,33.8,64.3],"name":"White","type":"scatter","mode":"lines","line":{"color":"#323844","width":4},"transforms":[{"type":"filter","target":["All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other"],"operation":"in","value":"All Students"}],"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2014,2014,2014,2014,2014,2014,2015,2015,2015,2015,2015,2015,2016,2016,2016,2016,2016,2016,2017,2017,2017,2017,2017,2017,2018,2018,2018,2018,2018,2018,2019,2019,2019,2019,2019,2019,2020,2020,2020,2020,2020,2020],"y":[30.1,29.6,23.9,55.4,24.7,30.2,28.5,34.6,36.5,45.7,16.3,23.2,27.6,32.5,36.9,49.2,12.8,32.6,28.1,35.8,48.2,49.3,13.2,31.8,32.9,47.3,45.1,43.3,16.5,14.3,27.3,43.5,33.3,48.3,11.7,34.5,33,46.9,40.5,49.6,17.4,30.9],"name":"Hispanic","type":"scatter","mode":"lines","line":{"color":"#eaab21","width":4},"transforms":[{"type":"filter","target":["All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other"],"operation":"in","value":"All Students"}],"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2014,2014,null,2014,2014,2014,2015,2015,2015,2015,2015,2015,2016,2016,2016,2016,2016,2016,2017,2017,2017,2017,2017,2017,2018,2018,2018,2018,2018,2018,2019,2019,2019,2019,2019,2019,2020,2020,2020,2020,2020,2020],"y":[68,50.9,null,87.6,43.8,85.7,65.8,56.1,57.9,90.5,38.8,61.9,65.2,63.2,55.6,81.7,36.1,71.4,67.4,61.7,59.1,85.5,42.7,85.7,74.4,77.3,57.1,89.4,44.6,87.5,73,72.9,76.9,87.2,54.7,75,64.4,62.2,40,84.3,37.5,76.5],"name":"Asian","type":"scatter","mode":"lines","line":{"color":"#a7bfd7","width":4},"transforms":[{"type":"filter","target":["All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other","All Students","State Funded","Head Start","Child Care","Home","Other"],"operation":"in","value":"All Students"}],"marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="early-care-and-pre-k" class="section level1">
<h1>Early Care and Pre-K</h1>
<div id="cost-and-availability-of-childcare" class="section level2">
<h2>Cost and Availability of Childcare</h2>
<p>Median monthly cost of childcare providers in Louisville is $650. Pending verification of KYNECT data</p>
<pre class="r"><code># Creates four data frames linked by license number (CLR)

# provider_information: original file from the state.
#    includes provider name, address, and several other fields.

# provider_hours: includes open days and hours

# provider_cost: includes program offerings and cost

# provider_other: includes other available info. 
#    Might just duplicate fields from program_information, though.

# Read in provider information (county, name, address, etc.)
provider_information &lt;- readxl::read_xlsx(&quot;raw_data/Chilcare Provider Download.xlsx&quot;,
                                          skip = 2)

# Subset to Jefferson County and rename license column for ease of use
provider_information %&lt;&gt;% 
  filter(County == &quot;JEFFERSON&quot;) %&gt;%
  rename(CLR = `CLR#`)
    
# Read in provider data collected from KYnect 
provider_data &lt;- read_csv(&quot;raw_data/Childcare Provider Cost Data.csv&quot;,
                          col_names = c(&quot;CLR&quot;, &quot;Day&quot;, &quot;Time&quot;, &quot;Services&quot;, &quot;FullTime&quot;, &quot;PartTime&quot;, &quot;Other&quot;))

# Check that no data is missing a license number - PASSED
# missing_CLR &lt;- provider_data %&gt;%
#   filter(is.na(CLR)) %&gt;%
#   filter(!is.na(Day) | !is.na(Time) | !is.na(Services) |
#            !is.na(FullTime) | !is.na(PartTime) | !is.na(Other))
# 
# # Check that the list of license numbers are identical - PASSED
# check_data1 &lt;- mean(provider_information$CLR %in% provider_data$CLR) + 
#                mean(provider_data$CLR %in% provider_information$CLR)

# Check values and number of each variable
# table(provider_data$Day) # good, 1 provider removed from listing
# table(provider_data$Time) # good
# table(provider_data$Services) # good
# table(provider_data$FullTime) # good
# table(test$PartTime) # often contains data for &quot;Other&quot;
# table(provider_data$Other) # good
# table(str_remove(provider_data$Other, &quot;\\d*&quot;)) # good

# Filter out rows without license numbers (used to make data entry easier)
# Remove C6739, which closed between the creation of the provider registry and data collection 
provider_data %&lt;&gt;%
  filter(!is.na(CLR), 
         CLR != &quot;C6739&quot;)

# The data for the &quot;Other&quot; column is often located in the PartTime column.
# Group by license and determine whether the number of children is in the PartTime column. (should be in Other)
# If so, move the data from the PartTime column to the Other column for that provider.
provider_data %&lt;&gt;%
  group_by(CLR) %&gt;%
  mutate(move_PartTime = if_else(any(str_detect(PartTime, &quot;Children&quot;)), T, F),
         move_PartTime = if_else(is.na(move_PartTime), F, move_PartTime)) %&gt;%
  mutate(Other = if_else(move_PartTime, PartTime, Other),
         PartTime = if_else(move_PartTime, NA_character_, PartTime)) %&gt;%
  ungroup() %&gt;%
  select(-move_PartTime)

# Hours data
# Clean by filtering data to days of the week
provider_hours &lt;- provider_data %&gt;%
  select(CLR, Day, Time) %&gt;%
  filter(Day %in% c(&quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;))

# Cost data
# Multiple offerings for each age-group are labeled with numbers (e.g. Toddler 1, Toddler 2). Remove.
# Clean by filtering data to type of service (infant, toddler, preschool, school age)
# Keep distinct (Removes multiple oferrings for the same age group with same prices)
provider_cost &lt;- provider_data %&gt;%
  select(CLR, Services, FullTime, PartTime) %&gt;%
  mutate(Services = str_remove(Services, &quot; \\d&quot;)) %&gt;%
  filter(Services %in% c(&quot;Infant&quot;, &quot;Toddler&quot;, &quot;Preschool&quot;, &quot;School Age&quot;)) %&gt;%
  distinct()

# View number of different-cost options within each age group
# provider_cost %&gt;% group_by(CLR, Services) %&gt;% summarise(n = n()) %&gt;% pull(n) %&gt;% table()

# Other data
provider_other &lt;- provider_data %&gt;%
  select(CLR, Other)

# Column contains data labels/headers followed by data
# Copy the data to a new column and shift it up one row to create key-value pairs 
provider_other$header &lt;- provider_other$Other
provider_other$data &lt;- c(provider_other$Other[2:nrow(provider_other)], NA_character_)

# Filter the data to rows where the header is in the header column. (Remove value-key pairs.)
# Spread the data across columns
provider_other %&lt;&gt;%
  select(-Other) %&gt;%
  filter(header %in% c(&quot;Capacity&quot;, &quot;CCCAP Subsidy&quot;, &quot;Acceditations&quot;, &quot;Food Permit&quot;, &quot;Transportation&quot;)) %&gt;%
  pivot_wider(names_from = header, values_from = data) %&gt;%
  mutate(
    Capacity = str_remove(Capacity, &quot; Children&quot;) %&gt;% as.numeric)</code></pre>
</div>
<div id="childcare-workers-compensation" class="section level2">
<h2>Childcare Workers compensation</h2>
<pre class="r"><code>read_and_prep &lt;- function(file_path) {
  df &lt;- readxl::read_excel(file_path) %&gt;%
    janitor::clean_names() %&gt;%
  mutate(MSA = as.numeric(area),
         h_median = as.numeric(h_median)) %&gt;%
  filter(MSA %in% c(24340, 41180, 36420, 46140, 24860, 28940, 13820, 31140, 26900, 
                        28140, 36540, 24660, 16740, 18140, 17140, 34980, 32820) &amp; 
           occ_title %in% c(&quot;Childcare Workers&quot;, &quot;Child care workers&quot;)) %&gt;%
  select(MSA, tot_emp, h_mean, a_mean, h_median, a_median) %&gt;%
  mutate(city = case_when(
    MSA == 24340 ~ &quot;Grand Rapids&quot;,
    MSA == 41180 ~ &quot;St. Louis&quot;,
    MSA == 36420 ~ &quot;Oklahoma City&quot;,
    MSA == 46140 ~ &quot;Tulsa&quot;,
    MSA == 24860 ~ &quot;Greenville&quot;,
    MSA == 28940 ~ &quot;Knoxville&quot;,
    MSA == 13820 ~ &quot;Birmingham&quot;,
    MSA == 31140 ~ &quot;Louisville&quot;,
    MSA == 26900 ~ &quot;Indianapolis&quot;,
    MSA == 28140 ~ &quot;Kansas City&quot;,
    MSA == 36540 ~ &quot;Omaha&quot;,
    MSA == 24660 ~ &quot;Greensboro&quot;,
    MSA == 16740 ~ &quot;Charlotte&quot;,
    MSA == 18140 ~ &quot;Columbus&quot;,
    MSA == 17140 ~ &quot;Cincinnati&quot;,
    MSA == 34980 ~ &quot;Nashville&quot;,
    MSA == 32820 ~ &quot;Memphis&quot;,
    TRUE ~ NA_character_
  ))
    
return(df)
  
}

df19 &lt;- read_and_prep(&quot;bls_data/MSA_M2019_dl.xlsx&quot;) %&gt;%
  mutate(year = 2019)

ranking(df19,
        &quot;h_median&quot;, 
        text_size = 2, 
        plot_title = &quot;Median Wages for Childcare Workers, 2019&quot;, 
        year = 2019,
        subtitle_text = &quot;2019&quot;, #font didn&#39;t really work here. Could play with text size more?
        y_title = &quot;Dollars&quot;,
        FIPS_df = FIPS_df)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>df18 &lt;- read_and_prep(&quot;bls_data/MSA_M2018_dl.xlsx&quot;) %&gt;%
  mutate(year = 2018)

df17 &lt;- read_and_prep(&quot;bls_data/MSA_M2017_dl.xlsx&quot;) %&gt;%
  mutate(year = 2017)

df16 &lt;- read_and_prep(&quot;bls_data/MSA_M2016_dl.xlsx&quot;) %&gt;%
  mutate(year = 2016)

df15 &lt;- read_and_prep(&quot;bls_data/MSA_M2015_dl.xlsx&quot;) %&gt;%
  mutate(year = 2015)

df14 &lt;- read_and_prep(&quot;bls_data/MSA_M2014_dl.xlsx&quot;) %&gt;%
  mutate(year = 2014)

df13 &lt;- read_and_prep(&quot;bls_data/MSA_M2013_dl_1_AK_IN.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2013_dl_2_KS_NY.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2013_dl_3_OH_WY.xls&quot;)) %&gt;%
  mutate(year = 2013)

df12 &lt;- read_and_prep(&quot;bls_data/MSA_M2012_dl_1_AK_IN.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2012_dl_2_KS_NY.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2012_dl_3_OH_WY.xls&quot;)) %&gt;%
  mutate(year = 2012)

df11 &lt;- read_and_prep(&quot;bls_data/MSA_M2011_dl_1_AK_IN.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2011_dl_2_KS_NY.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2011_dl_3_OH_WY.xls&quot;)) %&gt;%
  mutate(year = 2011)

df10 &lt;- read_and_prep(&quot;bls_data/MSA_M2010_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2010_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2010_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2010)




df09 &lt;- read_and_prep(&quot;bls_data/MSA_M2009_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2009_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2009_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2009)

df08 &lt;- read_and_prep(&quot;bls_data/MSA_M2008_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2008_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_M2008_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2008)

df07 &lt;- read_and_prep(&quot;bls_data/MSA_May2007_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_May2007_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_May2007_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2007)

df06 &lt;- read_and_prep(&quot;bls_data/MSA_may2006_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_may2006_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_may2006_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2006)

df05 &lt;- read_and_prep(&quot;bls_data/MSA_may2005_dl_1.xls&quot;) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_may2005_dl_2.xls&quot;)) %&gt;%
  bind_rows(read_and_prep(&quot;bls_data/MSA_may2005_dl_3.xls&quot;)) %&gt;%
  mutate(year = 2005)

#MSA codes all change in 2004

df_t &lt;- bind_rows(df19, df18, df17, df16, df15, df14, df13, df12, df11, df10, df09, df08, df07, df06, df05)</code></pre>
<pre class="r"><code>#inflate to 2019 dollars based on CPI
df_cpi &lt;- tibble(
  year = 2005:2019,
  cpi_value = c(195.292, 201.592, 207.342, 215.303, 214.537, 218.056, 224.939, 229.594, 232.957,
                236.736, 237.017, 240.007, 245.120,
                251.107, 255.657)
) %&gt;%
  mutate(multiplier = max(cpi_value)/ cpi_value) #scale to 2019 dollars

df_t &lt;- left_join(df_t, df_cpi, by = &quot;year&quot;)

df_t &lt;- df_t %&gt;%
  mutate(h_median = h_median * multiplier)</code></pre>
<pre class="r"><code>trend_cc(df_t, 
         &quot;h_median&quot;, 
         plot_title = &quot;Median Hourly Wages for Childcare Workers&quot;,
         y_title = &quot;Dollars&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
</div>
<div id="child-health" class="section level1">
<h1>Child Health</h1>
<div id="adverse-childhood-experiences" class="section level2">
<h2>Adverse Childhood Experiences</h2>
<p>Adverse childhood experiences are potentially traumatic events that occur in childhood. If you would prefer to skip past this section, you can do so by clicking “Child Food Security” in the sidebar.</p>
<p>Adverse Childhood Experiences (ACEs) include forms of abuse, neglect, and household dysfunction. Per the CDC, “ACEs can have lasting, negative effects on health, well-being, and opportunity. These experiences can increase the risks of injury, sexually transmitted infections, maternal and child health problems, teen pregnancy, involvement in sex trafficking, and a wide range of chronic diseases and leading causes of death such as cancer, diabetes, heart disease, and suicide.”</p>
<p>Data is from the Kentucky BRFSS survey. We are currently following up to determine the validity of the data broken down by race.</p>
<pre class="r"><code>ace_types &lt;- tibble(
  category = c(rep(&quot;abuse&quot;, 3), rep(&quot;dysfunction&quot;, 6)),
  type = c(&quot;physical_abuse&quot;, &quot;sexual_abuse&quot;, &quot;verbal_abuse&quot;,
           &quot;incarcerated_hh_member&quot;, &quot;drug_problem&quot;, &quot;drinking_problem&quot;,
           &quot;witness_domestic_violence&quot;, &quot;mentally_ill_hh_member&quot;, &quot;divorced_parents&quot;),
  percent = c(12.5, 15.4, 28.2, 9.7, 16.9, 31.6, 20.5, 26.1, 41.8))

ace_types %&lt;&gt;%
  mutate(type = factor(type, 
                       levels = c(&quot;incarcerated_hh_member&quot;, 
                                  &quot;drug_problem&quot;,
                                  &quot;drinking_problem&quot;,
                                  &quot;witness_domestic_violence&quot;, 
                                  &quot;mentally_ill_hh_member&quot;, 
                                  &quot;divorced_parents&quot;,
                                  &quot;physical_abuse&quot;, 
                                  &quot;sexual_abuse&quot;, 
                                  &quot;verbal_abuse&quot;),
                       labels = c(&quot;Incarcerated household member&quot;, 
                                  &quot;Drug problem in household&quot;,
                                  &quot;Drinking problem in household&quot;,
                                  &quot;Witnessed domestic violence&quot;, 
                                  &quot;Mentally ill household member&quot;, 
                                  &quot;Divorced Parents&quot;,
                                  &quot;Physical abuse&quot;, 
                                  &quot;Sexual abuse&quot;, 
                                  &quot;Verbal abuse&quot;),
                       ordered = TRUE))

text_size = 2

p &lt;- ggplot(ace_types, aes(type, percent))

p = p + guides(fill = FALSE, color = FALSE)

p &lt;- p +
  geom_bar(stat = &quot;identity&quot;,
           size = text_size) +
  coord_flip() +
  ggthemes::theme_tufte()

p &lt;- p + theme(text = element_text(family = &quot;Montserrat&quot;),
               plot.title = element_text(size = 14 * text_size, hjust = 0.5, margin = margin(b = 10, unit = &quot;pt&quot;)),
               axis.text.y = element_text(hjust = 0,
                                          size = 10 * text_size),
               axis.title.x = element_text(size = 10 * text_size),
               axis.title.y = element_text(size = 10 * text_size),
               axis.ticks = element_blank(),
               axis.text.x = element_text(hjust = 0,
                                          size = 10 * text_size),
               plot.caption = element_text(size = 5 * text_size, lineheight = 0.5))

# p &lt;- p +
#   labs(subtitle = subtitle_text) +
#   theme(plot.subtitle = element_text(hjust = 0.5, size = 10 * text_size))

# Add remaining text
p &lt;- p + labs(title = &quot;Prevelance of ACEs among Louisville adults&quot;,
              y = &quot;Percent&quot;,
              x = &quot;&quot;,
              caption = &quot;&quot;)

p &lt;- p +
  theme(
    panel.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the panel
    plot.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the plot
    legend.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend bg
    legend.box.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend panel bg
    legend.key = element_rect(fill = &quot;transparent&quot;,colour = NA))

p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>ace_prevelance &lt;- tibble(
  number = c(0:4, &quot;5+&quot;),
  percent = c(29, 20.8, 17.8, 10, 10, 12.4))

text_size = 2

p &lt;- ggplot(ace_prevelance, aes(number, percent))

p = p + guides(fill = FALSE, color = FALSE)

p &lt;- p +
  geom_bar(stat = &quot;identity&quot;,
           size = text_size) +
  #coord_flip() +
  ggthemes::theme_tufte()

p &lt;- p + theme(text = element_text(family = &quot;Montserrat&quot;),
               plot.title = element_text(size = 14 * text_size, hjust = 0.5, margin = margin(b = 10, unit = &quot;pt&quot;)),
               axis.text.y = element_text(hjust = 0,
                                          size = 10 * text_size),
               axis.title.x = element_text(size = 10 * text_size),
               axis.ticks = element_blank(),
               axis.text.x = element_text(hjust = 0,
                                          size = 10 * text_size),
               plot.caption = element_text(size = 5 * text_size, lineheight = 0.5))

# p &lt;- p +
#   labs(subtitle = subtitle_text) +
#   theme(plot.subtitle = element_text(hjust = 0.5, size = 10 * text_size))

# Add remaining text
p &lt;- p + labs(title = &quot;Percentage of Louisville adults by ACE score&quot;,
              y = &quot;Percent&quot;,
              x = &quot;Number of Adverse Childhood Experiences&quot;,
              caption = &quot;&quot;)

p &lt;- p +
  theme(
    panel.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the panel
    plot.background = element_rect(fill = &quot;transparent&quot;, color = NA), # bg of the plot
    legend.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend bg
    legend.box.background = element_rect(fill = &quot;transparent&quot;, color = &quot;transparent&quot;), # get rid of legend panel bg
    legend.key = element_rect(fill = &quot;transparent&quot;,colour = NA))

p</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="child-food-security" class="section level2 tabset">
<h2 class="tabset">Child Food Security</h2>
<div id="trend" class="section level3">
<h3>Trend</h3>
<p>During the COVID-19 pandemic, child food insecurity is estimated to have increased by 40% in Louisville compared to 2018.</p>
<pre class="r"><code># Read in food insecurity data from Mind the Meal Gap
dinner_time &lt;- function(folder, starting_year){
  
  wd &lt;- getwd()
  directory &lt;- paste0(wd, &quot;/&quot;, folder)
  file_names &lt;- list.files(directory)
  
  # Read file for each year
  for (y in starting_year:2018){
    
    # Create parameters to read in sheet based on the year
    file_path &lt;- paste0(wd, &quot;/&quot;, folder, &quot;/&quot;, file_names[y-2008])
    
    sheet_name &lt;- case_when(
      y %in% 2009:2010 ~ &quot;County&quot;,
      y %in% 2011:2018 ~ paste0(y, &quot; County&quot;))
    
    skip_num &lt;- case_when(
      y %in% 2009:2017 ~ 0,
      y %in% 2018 ~ 1)
    
    df &lt;- readxl::read_xlsx(file_path, sheet = sheet_name, skip = skip_num)

    # Create variables names based on the year
    food_insecure_var &lt;- paste0(y, &quot; Food Insecurity Rate&quot;)
    food_insecure_num_var &lt;- paste0(&quot;# of Food Insecure Persons in &quot;, y)
    child_food_insecure_var &lt;- paste0(y, &quot; Child food insecurity rate&quot;)
    child_food_insecure_num_var &lt;- paste0(&quot;# of Food Insecure Children in &quot;, y)
    insecure_FRL &lt;- paste0(&quot;% food insecure children in HH w/ HH incomes below 185 FPL in &quot;, y)
    insecure_non_FRL &lt;- paste0(&quot;% food insecure children in HH w/ HH incomes above 185 FPL in &quot;, y)

    # Tidy data frame
    df %&lt;&gt;%
      transmute(
        FIPS = str_pad(FIPS, 5, &quot;left&quot;, &quot;0&quot;),
        year = y,
        food_insecurity = .data[[food_insecure_var]],
        food_insecurity_num = .data[[food_insecure_num_var]],
        child_food_insecurity = .data[[child_food_insecure_var]],
        child_food_insecurity_num = .data[[child_food_insecure_num_var]],
        
        low_threshold = `Low Threshold in state`,
        low_threshold_type = `Low Threshold Type`,
        high_threshold = `High Threshold in state`,
        high_threshold_type = `High Threshold Type`,
        under_low = `% FI ≤ Low Threshold`,
        between = `% FI Btwn Thresholds`,
        above = `% FI &gt; High Threshold`,
        child_below_FRL = .data[[insecure_FRL]],
        child_above_FRL = .data[[insecure_non_FRL]])

    output &lt;- assign_row_join(output, df)
  }
  output
}

feeding_america &lt;- dinner_time(&quot;raw_data/Map the Meal Gap data&quot;, starting_year = 2012)
feeding_america_covid &lt;- readxl::read_xlsx(&quot;raw_data/Projections data (revised Oct. 2020)/The Impact of Coronavirus on Food Insecurity Update 10.2020.xlsx&quot;, sheet = &quot;County&quot;)

feeding_america_covid %&lt;&gt;%
  transmute(
    FIPS = str_pad(FIPS, 5, &quot;left&quot;, &quot;0&quot;),
    year = 2020,
    food_insecurity = `[Revised Projections – Oct 2020] \r\n2020 Food Insecurity  %`,
    food_insecurity_num = `[Revised Projections – Oct 2020] \r\n2020 Food Insecurity #`,
    child_food_insecurity = `[Revised Projections – Oct 2020] \r\n2020 Child Food Insecurity  %`,
    child_food_insecurity_num = `[Revised Projections – Oct 2020] \r\n2020 Child Food Insecurity #`)

feeding_america %&lt;&gt;%
  bind_rows(feeding_america_covid)

feeding_america %&lt;&gt;% 
  pull_peers(FIPS_df = FIPS_df) %&gt;%
  mutate(across(
    c(food_insecurity, child_food_insecurity, under_low, between, above, child_below_FRL, child_above_FRL), 
    ~ . * 100))

feeding_america_1 &lt;- feeding_america %&gt;%
  stl_merge(food_insecurity_num, child_food_insecurity_num, method = &quot;sum&quot;)

feeding_america_2 &lt;- feeding_america %&gt;%
  stl_merge(food_insecurity, under_low, between, above, method = &quot;mean&quot;, weight_var = &quot;food_insecurity_num&quot;)

feeding_america_3 &lt;- feeding_america %&gt;%
  stl_merge(child_food_insecurity, child_below_FRL, child_above_FRL, method = &quot;mean&quot;, weight_var = &quot;child_food_insecurity_num&quot;)

feeding_america_t = left_join(feeding_america_1, feeding_america_2) %&gt;%
  left_join(feeding_america_3)

feeding_america_t %&lt;&gt;%
  mutate(pct_above_frl = child_above_FRL * child_food_insecurity / 100,
         pct_below_frl = (100 - child_above_FRL) * child_food_insecurity / 100)

trend_cc(feeding_america_t,
         &quot;child_food_insecurity&quot;, 
         plot_title = &quot;Child Food Insecurity&quot;,
         y_title = &quot;Percent&quot;,
         xmin = 2014, xmax = 2020)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="ranking" class="section level3">
<h3>Ranking</h3>
<p>While Louisville is toward the middle of its peer cities, between 1 in 5 and 1 in 4 children is food insecure.</p>
<pre class="r"><code>ranking(feeding_america_t, 
        &quot;child_food_insecurity&quot;,
        plot_title = &quot;Child Food Insecurity, October 2020&quot;,
        year = 2020,
        order = &quot;Ascending&quot;,
        text_size = 2,
        FIPS_df = FIPS_df)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
